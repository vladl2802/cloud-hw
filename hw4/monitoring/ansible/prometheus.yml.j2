global:
  scrape_interval: {{ prometheus_scrape_interval }}

scrape_configs:
  - job_name: "application"
    metrics_path: /metrics
    static_configs:
      - targets:
{% for h in groups['application'] %}
        - "{{ hostvars[h].ansible_host | default(h) }}:8000"
{% endfor %}

  - job_name: "node"
    static_configs:
      - targets:
{% for h in groups['application'] %}
        - "{{ hostvars[h].ansible_host | default(h) }}:9100"
{% endfor %}
